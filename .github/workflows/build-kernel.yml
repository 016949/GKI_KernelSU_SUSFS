name: Build GKI Kernels Dispatcher

on:
  workflow_dispatch:
    inputs:
      make_release:
        description: 'Do you want to release these kernels?'
        required: true
        type: boolean
        default: false
      build_a12:
        description: 'Build Android 12 kernel?'
        required: true
        type: boolean
        default: true
      build_a13:
        description: 'Build Android 13 kernel?'
        required: true
        type: boolean
        default: true
      build_a14:
        description: 'Build Android 14 kernel?'
        required: true
        type: boolean
        default: true

jobs:
  dispatch-builds:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger A12 Build
        if: ${{ github.event.inputs.build_a12 == 'true' || github.event.inputs.build_a12 == '' }}
        run: |
          gh workflow run build-kernel-a12.yml --repo ${{ github.repository }}
      - name: Trigger A13 Build
        if: ${{ github.event.inputs.build_a13 == 'true' || github.event.inputs.build_a13 == '' }}
        run: |
          gh workflow run build-kernel-a13.yml --repo ${{ github.repository }}
      - name: Trigger A14 Build
        if: ${{ github.event.inputs.build_a14 == 'true' || github.event.inputs.build_a14 == '' }}
        run: |
          gh workflow run build-kernel-a14.yml --repo ${{ github.repository }}
